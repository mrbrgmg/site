<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accueil - S√©lection des mati√®res</title>
    <style>
        :root{
            --bg-1: #0f1724; /* deep navy */
            --bg-2: #10243a; /* slightly lighter */
            --card-bg: rgba(255,255,255,0.04);
            --glass: rgba(255,255,255,0.06);
            --muted: rgba(255,255,255,0.75);
            --text-strong: #e6eef8;
            --accent-a: #6ee7b7; /* mint */
            --accent-b: #60a5fa; /* sky */
            --accent-c: #f472b6; /* pink */
            --accent-d: #fbbf24; /* amber */
            --glass-border: rgba(255,255,255,0.06);
        }

        /* Reset */
        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%}

        body{
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            background: radial-gradient(1200px 600px at 10% 10%, rgba(96,165,250,0.12), transparent 8%),
                        radial-gradient(1000px 500px at 90% 80%, rgba(110,231,183,0.08), transparent 10%),
                        linear-gradient(180deg,var(--bg-1), var(--bg-2));
            color:var(--text-strong);
            min-height:100vh;
            display:flex;
            align-items:center;
            justify-content:center;
            padding:28px;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
        }

        /* Soft decorative glow behind content */
        body::before{
            content:'';
            position:fixed;
            inset: -20% -20% auto auto;
            width:55vw;height:55vh;
            pointer-events:none;
            background: radial-gradient(circle at 20% 20%, rgba(99,102,241,0.12), transparent 12%),
                        radial-gradient(circle at 80% 80%, rgba(99,102,241,0.08), transparent 10%);
            filter: blur(60px);
            z-index:0;
        }

        .container{
            position:relative;
            z-index:1;
            width:100%;
            max-width:820px;
            padding:42px;
            border-radius:20px;
            background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
            border:1px solid var(--glass-border);
            box-shadow: 0 8px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
            backdrop-filter: blur(12px) saturate(120%);
            text-align:center;
            animation: popIn .6s cubic-bezier(.2,.9,.3,1);
        }

        @keyframes popIn{
            from{opacity:0;transform:translateY(18px) scale(.995)}
            to{opacity:1;transform:none}
        }

        h1{
            color:var(--text-strong);
            font-size:2.4rem;
            font-weight:600;
            letter-spacing:-0.5px;
            margin-bottom:8px;
        }

        .subtitle{
            color:var(--muted);
            margin-bottom:28px;
            font-size:1.05rem;
            font-weight:500;
        }

        .subjects-grid{
            display:grid;
            grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
            gap:18px;
            margin-top:12px;
        }

        .subject-button{
            position:relative;
            overflow:hidden;
            border:0;
            padding:18px 22px;
            border-radius:14px;
            font-size:1.06rem;
            font-weight:700;
            text-transform:none;
            letter-spacing:0.6px;
            cursor:pointer;
            transition:transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s ease, filter .28s ease;
            display:flex;
            align-items:center;
            gap:12px;
            justify-content:center;
            color: #06202a;
            background: linear-gradient(135deg, rgba(255,255,255,0.85), rgba(255,255,255,0.82));
            box-shadow: 0 6px 18px rgba(2,6,23,0.35);
            transform-style:preserve-3d;
            backface-visibility:hidden;
        }

        .subject-button > span{font-size:1.3rem}

        /* Color accents kept but refined for modern look */
        .subject-button:nth-child(1){ /* 1 */
            background: linear-gradient(135deg, rgba(96,165,250,0.9), rgba(96,165,250,0.75));
            color: white;
            box-shadow: 0 10px 30px rgba(59,130,246,0.18);
        }
        .subject-button:nth-child(2){ /* 2 */
            background: linear-gradient(135deg, rgba(110,231,183,0.95), rgba(56,211,164,0.8));
            color: #02221a;
            box-shadow: 0 10px 30px rgba(34,197,94,0.12);
        }
        .subject-button:nth-child(3){ /* 3 */
            background: linear-gradient(135deg, rgba(244,114,182,0.95), rgba(251,191,36,0.9));
            color:#1a0b1a;
            box-shadow: 0 10px 30px rgba(236,72,153,0.12);
        }

        .subject-button::after{
            content:'';
            position:absolute;
            inset:0;
            background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0));
            mix-blend-mode:overlay;
            pointer-events:none;
        }

        .subject-button:hover{transform:translateY(-8px) scale(1.02);filter:brightness(1.02)}
        .subject-button:active{transform:translateY(-3px) scale(.995)}

        /* Small glowing icon effect */
        .subject-button span.emoji{display:inline-block;transform:translateY(-1px);filter:drop-shadow(0 6px 8px rgba(0,0,0,0.18))}

        /* Definition UI tweaks (only visuals) */
        .definition-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:28px;padding-bottom:12px;border-bottom:1px solid rgba(255,255,255,0.03)}

        .back-button{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);padding:10px 18px;border-radius:10px;cursor:pointer;transition:all .22s}
        .back-button:hover{transform:translateY(-3px);box-shadow:0 8px 18px rgba(2,6,23,0.5);border-color:rgba(255,255,255,0.09)}

        .definition-header h2{margin:0;font-size:1.4rem;color:var(--text-strong)}

        .definition-card{animation:popIn .45s ease-out}
        .definition-card h3{color:var(--muted);font-weight:600;margin-bottom:12px}

        .term{
            background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
            padding:22px;border-radius:14px;font-size:1.6rem;font-weight:700;color:var(--accent-b);
            margin:16px 0;border:1px solid rgba(255,255,255,0.03);box-shadow: 0 8px 30px rgba(99,102,241,0.06) inset;
        }

        .correction-section{margin:24px 0}

        .show-correction-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text-strong);padding:12px 20px;border-radius:10px;cursor:pointer;font-weight:700;transition:all .22s}
        .show-correction-btn:hover{transform:translateY(-3px);box-shadow:0 10px 22px rgba(0,0,0,0.45)}

        .correction{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:18px;border-radius:10px;border-left:4px solid rgba(96,165,250,0.6);color:var(--muted);}

        label{color:var(--muted);font-weight:700}

        #user-answer{width:100%;min-height:130px;padding:14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(2,6,23,0.25);color:var(--text-strong);font-size:1rem;font-family:inherit;resize:vertical;transition:box-shadow .2s, border-color .2s}
        #user-answer:focus{outline:none;border-color:rgba(96,165,250,0.6);box-shadow:0 8px 30px rgba(96,165,250,0.06)}

        .navigation-buttons{display:flex;gap:14px;justify-content:center;margin-top:24px;flex-wrap:wrap}

        .prev-definition-btn,.next-definition-btn{padding:12px 22px;border-radius:10px;border:0;font-weight:700;cursor:pointer;min-width:170px}
        .prev-definition-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
        .next-definition-btn{background:linear-gradient(90deg,var(--accent-b), #4f46e5);color:white}

        .prev-definition-btn:disabled,.next-definition-btn:disabled{opacity:0.5;cursor:not-allowed;transform:none}

        .progress-indicator{background:linear-gradient(90deg,var(--accent-a),var(--accent-b));color:#06202a;padding:8px 14px;border-radius:999px;font-weight:800}

        .definitions-list-container{animation:popIn .45s}
        .definitions-list{display:flex;flex-direction:column;gap:12px;margin-bottom:18px}

        .definition-item{display:flex;align-items:center;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);padding:14px 16px;border-radius:12px;cursor:pointer;transition:transform .2s,box-shadow .2s}
        .definition-item:hover{transform:translateY(-6px);box-shadow:0 14px 30px rgba(2,6,23,0.6)}
        .definition-item.visited{background:linear-gradient(90deg, rgba(110,231,183,0.06), rgba(96,165,250,0.03));border-color:rgba(110,231,183,0.12)}

        .definition-number{background:rgba(255,255,255,0.06);color:var(--text-strong);width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:800;margin-right:14px}
        .definition-item.visited .definition-number{background:linear-gradient(90deg,var(--accent-a),var(--accent-b));color:#04221b}

        .definition-term{flex:1;font-weight:800;color:var(--text-strong);font-size:1.06rem}
        .definition-status{font-size:0.9rem;padding:6px 12px;border-radius:999px;background:rgba(255,255,255,0.02);color:var(--muted);font-weight:700}
        .definition-item.visited .definition-status{background:rgba(110,231,183,0.12);color:var(--muted)}

        .subject-stats{background:linear-gradient(90deg,var(--accent-b),var(--accent-a));color:#04221b;padding:8px 14px;border-radius:999px;font-weight:800}

        .quick-actions{display:flex;gap:12px;justify-content:center;margin-top:22px;flex-wrap:wrap}
        .action-btn{padding:12px 20px;border-radius:10px;border:0;font-weight:800;cursor:pointer;min-width:160px}
        .start-btn{background:linear-gradient(90deg,var(--accent-a),var(--accent-b));color:#04221b}
        .random-btn{background:linear-gradient(90deg,var(--accent-d),#f97316);color:#2b1b00}

        .completion-card{padding:22px;border-radius:12px}
        .completion-icon{font-size:3.6rem;margin-bottom:12px}
        .completion-card h3{color:var(--accent-a);font-size:1.6rem;margin-bottom:8px}
        .completion-card p{color:var(--muted);line-height:1.5}

        .completion-actions{display:flex;flex-direction:column;gap:12px;align-items:center}
        .restart-btn{background:linear-gradient(90deg,var(--accent-b),#4f46e5);color:white}
        .list-btn{background:linear-gradient(90deg,#7c3aed,#6d28d9);color:white}
        .home-btn{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

        @media(max-width:768px){
            .container{padding:28px}
            h1{font-size:1.8rem}
            .term{font-size:1.3rem}
            .subjects-grid{grid-template-columns:1fr}
        }

        .footer{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.03);color:var(--muted);padding:8px 14px;border-radius:999px;border:1px solid rgba(255,255,255,0.02);backdrop-filter:blur(6px)}

    </style>
</head>
<body>
    <div class="container">
        <h1>Bienvenue</h1>
        <p class="subtitle">Choisissez une mati√®re pour commencer</p>
        
        <div class="subjects-grid">
            <button class="subject-button" onclick="selectSubject('biologie')">
                <span class="emoji">üß¨</span> Biologie
            </button>
            <button class="subject-button" onclick="selectSubject('mathematiques')">
                <span class="emoji">üìä</span> Math√©matiques
            </button>
            <button class="subject-button" onclick="selectSubject('svt')">
                <span class="emoji">üå±</span> SVT
            </button>
        </div>
    </div>

    <div class="footer">
        S√©lectionnez une mati√®re pour acc√©der au contenu
    </div>

    <script>
        // Base de donn√©es des d√©finitions par mati√®re
        const definitions = {
            biologie: [
    {"term": "Mol√©cule polaire", "definition": "Les charges √©lectriques sont in√©galement r√©parties, elle a un p√¥le positif et un p√¥le n√©gatif."},
    {"term": "Mol√©cule apolaire", "definition": "Les charges √©lectriques sont uniformes, pas de p√¥les."},
    {"term": "Ions", "definition": "Atome ou mol√©cule qui a une charge √©lectrique, Cation(+) ou Anion(-)."},
    {"term": "Chloroplastes", "definition": "Organites des cellules v√©g√©tales, permettent la photosynth√®se."},
    {"term": "Lipides", "definition": "Mol√©cules compos√©es d'acides gras pr√©sentes dans notre alimentation, source d'√©nergie. Principalement compos√©es de C, H, O (ternaires)."},
    {"term": "Enzymes", "definition": "Prot√©ines qui acc√©l√®rent les r√©actions chimiques dans le corps (digestion, etc.)."},
    {"term": "H√©moglobines", "definition": "Prot√©ines des globules rouges, transportent l‚Äôoxyg√®ne des poumons vers les tissus et le dioxyde de carbone des tissus vers les poumons."},
    {"term": "Anucl√©√©es", "definition": "Cellules sans noyau."},
    {"term": "Mitose", "definition": "Division cellulaire."},
    {"term": "Organite", "definition": "Structure dans une cellule qui a une fonction pr√©cise."},
    {"term": "Biochimie", "definition": "Chimie du vivant."},
    {"term": "Compos√©s ternaires", "definition": "Mol√©cules constitu√©es de carbone (C), d‚Äôhydrog√®ne (H) et d‚Äôoxyg√®ne (O)."},
    {"term": "Prot√©ines", "definition": "Mol√©cules qui font le travail dans la cellule (structure, enzymes, transport‚Ä¶)."},
    {"term": "Procaryotes", "definition": "Organismes unicellulaires sans noyau, pas d'organites."},
    {"term": "Bact√©ries", "definition": "Organismes unicellulaires sans noyau, tr√®s r√©pandus dans tous les milieux."},
    {"term": "Arch√©es", "definition": "Organismes unicellulaires sans noyau, souvent extr√™mophiles."},
    {"term": "Extr√™mophiles", "definition": "Organismes qui vivent et se d√©veloppent dans des conditions extr√™mes, souvent mortelles pour la plupart des autres √™tres vivants."},
    {"term": "Eucaryotes", "definition": "Organismes dont les cellules poss√®dent un noyau v√©ritable entour√© d‚Äôune membrane, ainsi que des organites."},
    {"term": "Cellule", "definition": "Unit√© de vie."},
    {"term": "H√©t√©rotrophe", "definition": "Organisme qui ne peut fabriquer sa nourriture √† partir de rien, a besoin de mati√®re organique provenant de l'ext√©rieur."}
],

            mathematiques: [
                {
                    term: "Fonction d√©riv√©e",
                    definition: "Fonction qui donne la pente de la tangente √† la courbe repr√©sentative d'une fonction en chaque point o√π elle existe."
                },
                {
                    term: "Limite",
                    definition: "Valeur vers laquelle tend une fonction lorsque la variable ind√©pendante s'approche d'une valeur donn√©e."
                },
                {
                    term: "Int√©grale",
                    definition: "Op√©ration math√©matique qui calcule l'aire sous la courbe d'une fonction sur un intervalle donn√©."
                },
                {
                    term: "Matrice",
                    definition: "Tableau rectangulaire de nombres, de symboles ou d'expressions, arrang√©s en lignes et en colonnes."
                },
                {
                    term: "Probabilit√©",
                    definition: "Mesure quantitative de la vraisemblance qu'un √©v√©nement se produise, exprim√©e par un nombre entre 0 et 1."
                }
            ],
            svt: [
                {
                    term: "Tectonique des plaques",
                    definition: "Th√©orie expliquant la dynamique globale de la lithosph√®re terrestre, divis√©e en plaques qui se d√©placent sur l'asth√©nosph√®re."
                },
                {
                    term: "√âcosyst√®me",
                    definition: "Ensemble form√© par une communaut√© d'√™tres vivants et leur environnement physique, fonctionnant comme une unit√© √©cologique."
                },
                {
                    term: "S√©lection naturelle",
                    definition: "M√©canisme √©volutif par lequel les individus les mieux adapt√©s √† leur environnement ont plus de chances de survivre et de se reproduire."
                },
                {
                    term: "G√©ologie",
                    definition: "Science qui √©tudie la composition, la structure, l'histoire et l'√©volution de la Terre et des processus qui la fa√ßonnent."
                },
                {
                    term: "Biodiversit√©",
                    definition: "Vari√©t√© de la vie sur Terre, incluant la diversit√© des esp√®ces, des g√®nes et des √©cosyst√®mes."
                }
            ]
        };

        let currentDefinition = null;
        let isCorrectionalVisible = false;
        let currentSubject = null;
        let currentIndex = 0;
        let userAnswers = {};
        let visitedDefinitions = {};
        let navigationHistory = []; // Historique de navigation

        function selectSubject(subject) {
            event.target.style.transform = 'scale(0.95)';
            setTimeout(() => {
                event.target.style.transform = '';
            }, 150);

            currentSubject = subject;
            if (!userAnswers[subject]) {
                userAnswers[subject] = {};
            }
            if (!visitedDefinitions[subject]) {
                visitedDefinitions[subject] = {};
            }
            
            // R√©initialiser l'historique de navigation pour cette mati√®re
            navigationHistory = [];

            showDefinitionsList(subject);
        }

        function showDefinitionsList(subject) {
            const container = document.querySelector('.container');
            const subjectDefinitions = definitions[subject];
            
            let definitionsListHTML = '';
            subjectDefinitions.forEach((def, index) => {
                const isVisited = visitedDefinitions[subject][index];
                const statusClass = isVisited ? 'visited' : 'unvisited';
                definitionsListHTML += `
                    <div class="definition-item ${statusClass}" onclick="goToDefinition(${index})">
                        <div class="definition-number">${index + 1}</div>
                        <div class="definition-term">${def.term}</div>
                        <div class="definition-status">${isVisited ? '‚úì Vue' : '‚óã Non vue'}</div>
                    </div>
                `;
            });

            container.innerHTML = `
                <div class="definition-header">
                    <button class="back-button" onclick="goBack()">‚Üê Retour √† l'accueil</button>
                    <h2>${subject.charAt(0).toUpperCase() + subject.slice(1)}</h2>
                    <div class="subject-stats">
                        ${Object.keys(visitedDefinitions[subject] || {}).length} / ${subjectDefinitions.length} vues
                    </div>
                </div>
                
                <div class="definitions-list-container">
                    <h3>S√©lectionnez une d√©finition √† r√©viser :</h3>
                    <div class="definitions-list">
                        ${definitionsListHTML}
                    </div>
                    
                    <div class="quick-actions">
                        <button class="action-btn start-btn" onclick="startFromFirst()">
                            üéØ Commencer depuis le d√©but
                        </button>
                        <button class="action-btn random-btn" onclick="goToRandomDefinition()">
                            üé≤ D√©finition al√©atoire
                        </button>
                    </div>
                </div>
            `;
        }

        function goToDefinition(index) {
            // Ajouter la d√©finition actuelle √† l'historique avant de changer
            if (currentIndex !== null && currentIndex !== index) {
                navigationHistory.push(currentIndex);
            }
            
            currentIndex = index;
            visitedDefinitions[currentSubject][index] = true;
            showDefinitionAtIndex(currentIndex);
        }

        function startFromFirst() {
            // R√©initialiser l'historique et aller √† la premi√®re d√©finition
            navigationHistory = [];
            goToDefinition(0);
        }

        function goToRandomDefinition() {
            const subjectDefinitions = definitions[currentSubject];
            const randomIndex = Math.floor(Math.random() * subjectDefinitions.length);
            goToDefinition(randomIndex);
        }

        function showDefinitionAtIndex(index) {
            const subjectDefinitions = definitions[currentSubject];
            currentIndex = index;
            currentDefinition = subjectDefinitions[currentIndex];
            isCorrectionalVisible = false;

            showDefinitionInterface();
        }

        function showDefinitionInterface() {
            const container = document.querySelector('.container');
            const subjectDefinitions = definitions[currentSubject];
            const currentAnswer = userAnswers[currentSubject][currentIndex] || '';
            
            visitedDefinitions[currentSubject][currentIndex] = true;
            
            container.innerHTML = `
                <div class="definition-header">
                    <button class="back-button" onclick="backToDefinitionsList()">‚Üê Liste des d√©finitions</button>
                    <h2>${currentSubject.charAt(0).toUpperCase() + currentSubject.slice(1)}</h2>
                    <div class="progress-indicator">
                        ${currentIndex + 1} / ${subjectDefinitions.length}
                    </div>
                </div>
                
                <div class="definition-card">
                    <h3>D√©finissez ce terme :</h3>
                    <div class="term">${currentDefinition.term}</div>
                    
                    <div class="answer-section">
                        <label for="user-answer">Votre r√©ponse :</label>
                        <textarea 
                            id="user-answer" 
                            placeholder="Tapez votre d√©finition ici..."
                            oninput="saveCurrentAnswer()"
                        >${currentAnswer}</textarea>
                    </div>
                    
                    <div class="correction-section">
                        <button class="show-correction-btn" onclick="toggleCorrection()">
                            Afficher la correction
                        </button>
                        <div class="correction" id="correction" style="display: none;">
                            <h4>Correction :</h4>
                            <p>${currentDefinition.definition}</p>
                        </div>
                    </div>
                    
                    <div class="navigation-buttons">
                        <button class="prev-definition-btn" onclick="previousDefinition()" ${navigationHistory.length === 0 ? 'disabled' : ''}>
                            ‚Üê D√©finition pr√©c√©dente
                        </button>
                        <button class="next-definition-btn" onclick="nextDefinition()">
                            D√©finition al√©atoire ‚Üí
                        </button>
                    </div>
                </div>
            `;
        }

        function saveCurrentAnswer() {
            const textarea = document.getElementById('user-answer');
            if (textarea && currentSubject && currentIndex !== null) {
                userAnswers[currentSubject][currentIndex] = textarea.value;
            }
        }

        function backToDefinitionsList() {
            saveCurrentAnswer();
            showDefinitionsList(currentSubject);
        }

        function nextDefinition() {
            saveCurrentAnswer();
            
            // Ajouter la d√©finition actuelle √† l'historique avant de changer
            if (currentIndex !== null) {
                navigationHistory.push(currentIndex);
            }
            
            const subjectDefinitions = definitions[currentSubject];
            const unvisitedIndices = [];
            
            for (let i = 0; i < subjectDefinitions.length; i++) {
                if (!visitedDefinitions[currentSubject][i]) {
                    unvisitedIndices.push(i);
                }
            }
            
            if (unvisitedIndices.length > 0) {
                const randomIndex = Math.floor(Math.random() * unvisitedIndices.length);
                const selectedIndex = unvisitedIndices[randomIndex];
                showDefinitionAtIndex(selectedIndex);
            } else {
                showCompletionMessage();
            }
        }

        function previousDefinition() {
            if (navigationHistory.length > 0) {
                saveCurrentAnswer();
                
                // R√©cup√©rer la derni√®re d√©finition visit√©e depuis l'historique
                const previousIndex = navigationHistory.pop();
                showDefinitionAtIndex(previousIndex);
            }
        }

        function toggleCorrection() {
            const correction = document.getElementById('correction');
            const button = document.querySelector('.show-correction-btn');
            
            if (isCorrectionalVisible) {
                correction.style.display = 'none';
                button.textContent = 'Afficher la correction';
                button.style.background = 'linear-gradient(135deg, #28a745, #20c997)';
            } else {
                correction.style.display = 'block';
                correction.style.animation = 'fadeInUp 0.5s ease-out';
                button.textContent = 'Masquer la correction';
                button.style.background = 'linear-gradient(135deg, #dc3545, #e74c3c)';
            }
            isCorrectionalVisible = !isCorrectionalVisible;
        }

        function backToDefinitionsList() {
            saveCurrentAnswer();
            showDefinitionsList(currentSubject);
        }

        function showCompletionMessage() {
            const container = document.querySelector('.container');
            const subjectDefinitions = definitions[currentSubject];
            
            container.innerHTML = `
                <div class="definition-header">
                    <button class="back-button" onclick="backToDefinitionsList()">‚Üê Liste des d√©finitions</button>
                    <h2>${currentSubject.charAt(0).toUpperCase() + currentSubject.slice(1)}</h2>
                    <div class="progress-indicator completed">
                        ‚úÖ ${subjectDefinitions.length} / ${subjectDefinitions.length} Termin√© !
                    </div>
                </div>
                
                <div class="completion-card">
                    <div class="completion-icon">üéâ</div>
                    <h3>F√©licitations !</h3>
                    <p>Vous avez r√©vis√© toutes les d√©finitions de <strong>${currentSubject}</strong> !</p>
                    
                    <div class="completion-actions">
                        <button class="action-btn restart-btn" onclick="restartSubject()">
                            üîÑ Recommencer cette mati√®re
                        </button>
                        <button class="action-btn list-btn" onclick="backToDefinitionsList()">
                            üìã Voir la liste compl√®te
                        </button>
                        <button class="action-btn home-btn" onclick="goBack()">
                            üè† Retour √† l'accueil
                        </button>
                    </div>
                </div>
            `;
        }

        function restartSubject() {
            visitedDefinitions[currentSubject] = {};
            navigationHistory = []; // R√©initialiser l'historique
            showDefinitionsList(currentSubject);
        }

        function getNextDefinition(subject) {
            nextDefinition();
        }

        function goBack() {
            location.reload();
        }

        // Animation d'entr√©e pour les boutons
        document.addEventListener('DOMContentLoaded', () => {
            const buttons = document.querySelectorAll('.subject-button');
            buttons.forEach((button, index) => {
                button.style.opacity = '0';
                button.style.transform = 'translateY(20px)';
                setTimeout(() => {
                    button.style.transition = 'all 0.5s cubic-bezier(.2,.9,.3,1)';
                    button.style.opacity = '1';
                    button.style.transform = 'translateY(0)';
                }, 300 + (index * 140));
            });
        });
    </script>
</body>
</html>
